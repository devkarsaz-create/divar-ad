# پروژه Divar Ad-App: مستند جامع و نقشه راه

این مستند، منبع حقیقت واحد (Single Source of Truth) برای پروژه اپلیکیشن آگهی ما است. هدف آن، شفاف‌سازی چشم‌انداز، معماری، تکنولوژی‌ها و نقشه راه توسعه از ابتدا تا انتها است.

---

## ۱. چشم‌انداز و هدف اصلی (Vision & Goal)

**هدف اصلی:** ساخت یک پلتفرم ثبت آگهی مدرن، سریع، قابل اعتماد و کاربرپسند، با الهام از بهترین ویژگی‌های پلتفرم «دیوار». این اپلیکیشن باید یک تجربه کاربری روان در وب ارائه دهد و زیرساخت آن به گونه‌ای طراحی شود که در آینده به راحتی قابل توسعه (Scalable) برای ویژگی‌های جدید و کاربران بیشتر باشد.

---

## ۲. معماری و پشته فناوری (Architecture & Tech Stack)

ما از یک معماری **میکروسرویس-گرا** با دو بخش کاملاً مجزا استفاده می‌کنیم:

### ✅ فرانت‌اند (Frontend)
- **زبان:** TypeScript
- **فریم‌ورک:** Vue.js 3
- **سینتکس:** Composition API با `<script setup>`
- **ابزار ساخت (Build Tool):** Vite
- **استایل‌دهی:** Tailwind CSS برای Utility-First CSS
- **کتابخانه درخواست HTTP:** Axios (برای ارتباط با بک‌اند)

### ✅ بک‌اند (Backend)
- **زبان:** Go (Golang)
- **فریم‌ورک وب:** Gin
- **ویژگی کلیدی:** سرعت بسیار بالا، کامپایل شدن به یک فایل باینری واحد، مدیریت بهینه همزمانی (Concurrency).

### ⏳ پایگاه داده (Database) - *در فاز بعدی تصمیم‌گیری می‌شود*
- **گزینه ۱ (پیشنهادی):** **PostgreSQL** - یک پایگاه داده رابطه‌ای قدرتمند و متن-باز که با Go به خوبی کار می‌کند.
- **گزینه ۲:** **Cloud Firestore** - یک پایگاه داده NoSQL از Firebase که برای ویژگی‌های real-time و همگام‌سازی زنده عالی است.

### ✅ محیط توسعه و استقرار (Dev & Ops)
- **محیط توسعه:** Firebase Studio (Project IDX)
- **پیکربندی محیط:** Nix (`dev.nix`) برای تعریف ابزارها و بسته‌های لازم به صورت کد.
- **Live Reloading:**
  - **فرانت‌اند:** توسط Vite
  - **بک‌اند:** توسط ابزار `air`
- **کانتینرسازی (در آینده):** Docker
- **استقرار (در آینده):**
  - **فرانت‌اند:** Firebase Hosting
  - **بک‌اند:** Google Cloud Run

---

## ۳. استراتژی توسعه (Development Strategy)

- **API-First:** ابتدا APIهای بک‌اند را طراحی و پیاده‌سازی می‌کنیم، سپس فرانت‌اند را به آن متصل می‌کنیم.
- **جداسازی کامل:** منطق فرانت‌اند و بک‌اند کاملاً از هم جدا هستند. این کار نگهداری و توسعه موازی را آسان می‌کند.
- **محیط توسعه خودکار:** فایل `dev.nix` تضمین می‌کند که هر توسعه‌دهنده‌ای با یک دستور، کل محیط توسعه را با تمام ابزارها و پیش‌نمایش‌های لازم به صورت آماده در اختیار دارد.

---

## ۴. نقشه راه پروژه (Project Roadmap)

در اینجا مسیر توسعه را به فازهای مختلف تقسیم کرده و پیشرفت را دنبال می‌کنیم.

### فاز ۱: برپایی و زیرساخت (Setup & Infrastructure)
- [✅] راه‌اندازی اولیه پروژه Vue.js با Vite.
- [✅] ساخت کامپوننت‌های اولیه UI (مانند `AdCard`, `AdList`, `Header`).
- [✅] ساخت ساختار اولیه پروژه بک‌اند با Go و فریم‌ورک Gin.
- [✅] ایجاد یک Endpoint آزمایشی (Mock API) در بک‌اند برای ارسال داده‌های نمونه.
- [✅] پیکربندی کامل محیط توسعه در `dev.nix` برای پشتیبانی همزمان از Go و Node.js.
- [✅] افزودن ابزارهای `air` (برای live-reload بک‌اند) و `docker` به محیط.
- [✅] تعریف دو پیش‌نمایش (Preview) مجزا و خودکار برای فرانت‌اند و بک‌اند.
- [✅] برقراری ارتباط موفقیت‌آمیز بین فرانت‌اند (Vue) و بک‌اند (Go) با استفاده از متغیرهای محیطی.
- [✅] رفع تمام خطاهای مربوط به ساخت محیط (Build Errors) و رسیدن به یک محیط توسعه پایدار و کاملاً خودکار.

### فاز ۲: بک‌اند اصلی و پایگاه داده (Core Backend & Database)
- [ ] انتخاب و راه‌اندازی پایگاه داده نهایی (PostgreSQL یا Firestore).
- [ ] طراحی اسکیمای پایگاه داده (جداول/کالکشن‌ها برای `ads`, `users`, `categories`).
- [ ] پیاده‌سازی کامل APIهای CRUD (Create, Read, Update, Delete) برای آگهی‌ها در Go.
- [ ] پیاده‌سازی سیستم احراز هویت و مدیریت کاربران (ثبت‌نام، ورود، JWT).
- [ ] اتصال بک‌اند به پایگاه داده واقعی و حذف داده‌های Mock.
- [ ] نوشتن تست‌های واحد (Unit Tests) برای API Endpoints.

### فاز ۳: توسعه کامل فرانت‌اند (Full Frontend Development)
- [ ] اتصال کامل فرانت‌اند به APIهای واقعی بک‌اند.
- [ ] ساخت صفحات مورد نیاز: صفحه جزئیات آگهی، صفحه ثبت/ویرایش آگهی، صفحات ورود و ثبت‌نام کاربر.
- [ ] پیاده‌سازی مدیریت وضعیت (State Management) با **Pinia** برای مدیریت نشست کاربر (User Session) و داده‌های سراسری.
- [ ] پیاده‌سازی قابلیت جستجو، فیلتر و دسته‌بندی آگهی‌ها.
- [ ] نهایی‌سازی و بهبود طراحی UI/UX.

### فاز ۴: ویژگی‌های پیشرفته و بهینه‌سازی (Advanced Features & Optimization)
- [ ] پیاده‌سازی قابلیت آپلود تصویر برای آگهی‌ها (مثلاً با استفاده از Firebase Storage).
- [ ] افزودن ویژگی‌های Real-time (مانند چت بین کاربران) با استفاده از WebSockets یا Firestore Listeners.
- [ ] بهینه‌سازی عملکرد فرانت‌اند (Lazy Loading کامپوننت‌ها و روت‌ها).
- [ ] بهبود دسترسی‌پذیری (Accessibility - A11Y).

### فاز ۵: استقرار و پروداکشن (Deployment & Production)
- [ ] ساختن نسخه نهایی (Production Build) از اپلیکیشن Vue.js.
- [ ] کانتینری کردن اپلیکیشن Go با استفاده از Docker.
- [ ] راه‌اندازی یک پایپ‌لاین CI/CD (مثلاً با GitHub Actions).
- [ ] استقرار فرانت‌اند در Firebase Hosting.
- [ ] استقرار بک‌اند در یک سرویس مقیاس‌پذیر مانند Google Cloud Run.
